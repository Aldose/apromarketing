extends layout
block append head
  title= t('articlesMeta.title')
  meta(name='description', content=t('articlesMeta.description'))
  link(rel='canonical', href=`https://a-pro.ai`+(lang != 'en' ? '/' + lang : '') + `/articles/all/${page}`)
  meta(name="keywords", content=t('articlesMeta.keywords'))
  meta(name='robots', content='index, follow')
  meta(property='og:title', content=t('articlesMeta.title'))
  meta(property='og:description', content=t('articlesMeta.description'))
  meta(property='og:url', content=`https://a-pro.ai`+(lang != 'en' ? '/' + lang : '') + `/articles/all/${page}`)
  meta(property='og:image', content=`https://a-pro.ai/images/backgrounds/articles-hero.jpg`)
  meta(property='og:image:width', content='1200')
  meta(property='og:image:height', content='630')
  meta(property='og:type', content='website')
  meta(property='og:locale', content=lang)

block content
  section.blog.q-pa-md
    h1.text-center= t('articles')
    //- .row
      .col-12(style="height:300px; overflow:hidden;")
        q-img(src="~/assets/images/backgrounds/articles-hero.jpg")
    .q-my-md
      .container
        h2.text-center=t('articlesSubtitle')
        .row
          each article, i in articles
            .col-12.col-sm-6.col-md-4.col-lg-4.col-xl-3.mb-3.px-2( style=('view-transition-name:' + article.slug) )
              a(href=(lang != 'en' ? '/' + lang : '') + '/article/' + article.slug)
                .articles.card.flex.column.justify-between.blog-article(class='animation-delay-' + i, style="height: 100%")
                  .article-title
                    img.blur-up.lazyload( data-src=article.medImg loading="lazy" alt=article.imgAlt)
                  .article-content
                    h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left!= article.title
                    .green-line
                    .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
                      .flex.align-items-center
                        .avatar
                          img.blur-up.lazyload(src=article.authorImg loading="lazy")
                        .text-subtitle2 #{article.author}
                      b.text-subtitle2 #{article.date}
                    a(href=(lang != 'en' ? '/' + lang : '') + '/article/' + article.slug)
                      .text-body1(style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;")!= article.summary
        if articles.length > 0
          - const totalPages = articles[0].totalPages; 
          .row.q-col-gutter-md.q-mb-md
            .col-12.flex.justify-content-center
              nav( aria-label="Page navigation")
                ul.pagination
                  if page > 1
                    li.page-item
                      a.page-link(href=(lang != 'en' ? '/' + lang : '') + `/articles/${category}/` + (page - 1)) #{page - 1}
                  li.page-item
                    a.page-link(href=(lang != 'en' ? '/' + lang : '') + `/articles/${category}/` + (page)) #{page}
                  if page < totalPages
                    li.page-item
                      a.page-link(href=(lang != 'en' ? '/' + lang : '') + `/articles/${category}/` + (page + 1)) #{page + 1}
block append scripts
  //- - var jsonLD = { "@context": "https://schema.org", "@type": "ItemList", "itemListElement": articles.map(function(article, index) { return {         "@type": "ListItem",         "position": index + 1,         "url": (lang !== "en" ? "/" + lang : "") + "/article/" + article.slug,         "name": article.title,         "image": article.medImg       };     })   };
  
  script(src="/js/lazy-sizes.js" async="")
  script(type="application/ld+json").
    !{JSON.stringify(jsonLD, null, 2)}
  
block append styles
  link(rel="stylesheet" href="/css/pages/blogList.css")
