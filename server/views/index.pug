extends layout
block append head
  title= t('homePageMeta.title')
  meta(name='description', content=t('homePageMeta.description'))
  link(rel='canonical', href=`https://apromarketing.com`+(lang != 'en' ? '/' + lang : '') + `/`)
  meta(name="keywords", content=t('homePageMeta.keywords'))
  meta(name='robots', content='index, follow')
  meta(property='og:title', content=t('homePageMeta.title'))
  meta(property='og:description', content=t('homePageMeta.description'))
  meta(property='og:url', content=`https://apromarketing.com`+(lang != 'en' ? '/' + lang : '') + `/`)
  meta(property='og:image', content=`https://apromarketing.com/images/homepageImg.png`)
  meta(property='og:image:width', content='1200')
  meta(property='og:image:height', content='630')
  meta(property='og:type', content='website')
  meta(property='og:locale', content=lang)
  
  // Structured Data (JSON-LD)
  script(type='application/ld+json').
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "A-Pro",
      "url": "https://a-pro.ai" + (lang !== 'en' ? '/' + lang : ''),
      "logo": "https://a-pro.ai/images/logo/apro-logo1.png",
      "description": !{JSON.stringify(t('homePageMeta.description'))},
      "sameAs": [
        "https://www.facebook.com/a-pro.ai",
        "https://twitter.com/a_pro_ai",
        "https://www.linkedin.com/company/a-pro-ai"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-732-737-7099",
        "contactType": "customer service",
        "availableLanguage": ["English", "Chinese", "Japanese", "Spanish"]
      }
    }
  
  script(type='application/ld+json').
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "A-Pro",
      "url": "https://a-pro.ai" + (lang !== 'en' ? '/' + lang : ''),
      "description": !{JSON.stringify(t('homePageMeta.description'))},
      "inLanguage": lang,
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://a-pro.ai" + (lang !== 'en' ? '/' + lang : '') + "/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }

block content
  link(rel="stylesheet" href="/css/pages/index.css")
  // Vue.js CDN for demo animations
  script(src="https://unpkg.com/vue@3/dist/vue.global.js")

  #demo-app.container
    // White fade overlay for smooth layout transitions
    .transition-overlay(:class="{ 'fade-active': isTransitioning }")

    //- !! AI WARNING: The hero section below uses Vue.js for the demo animation.
    //- !! #hero-graphic fades out when demo starts, #demo-form-section moves left,
    //- !! and .blog-panel-container slides in from the right. These IDs and Vue
    //- !! bindings are required. Do not remove or restructure without approval.
    section.hero-section(:class="{ 'with-blog-panel': showBlogPanel }" style="transform:translate3d(0,0,0)")
      .row
        // Left column ‚Äî Jade graphic, fades out when demo starts
        .col-lg-6.col-sm-12.text-center#hero-graphic(v-show="!formSubmitted" :class="{ 'fade-out': isAnimating }")
          h1.mb-0.poppins-bold=t('heroTitle1')
          h1.green-underline=t('heroTitle2')
          br
          img(src="/images/jade/jade1.jpg" alt="Jade" style="width:300px;")
          br
          h2.green-underline.text-center.poppins-bold.q-mb-lg!=t('heroSubTitle1')
          h3.text-center.poppins-bold.q-mb-lg!=t('heroSubTitle2')

        // Right column ‚Äî Demo form, moves left when demo starts
        .col-lg-6.offset-lg-0.col-md-8.offset-md-2.col-sm-12.offset-sm-0.mt-sm-5.text-center.flex.flex-column.justify-content-center#demo-form-section(
          :class="{ 'move-left': isAnimating, 'form-with-blog': formSubmitted }"
        )
          .header-content#header-content(v-show="!isAnimating" :class="{ 'fade-up': isAnimating }")
            h2.mb-5.poppins-bold!=t('heroSubTitle3')

          form#demo-form(@submit.prevent="handleFormSubmit" v-show="!showResults")
            p!=t('homeInputTitle')
            .row
              .col-8
                input#demo-website-input(
                  type="text"
                  v-model="websiteUrl"
                  placeholder!=t('homeInputPlaceholder')
                  style="width:100%;"
                  required
                  :disabled="isLoading"
                )
              .col-4
                button.btn-primary.cta-btn(type="submit" style="background:white;color:black;" :disabled="isLoading")
                  img(style="width:35px;height:35px" width="35" src="/images/icons/apro-star1.png" alt="star")
                  span(style="text-transform:uppercase;") {{ isLoading ? 'ANALYZING...' : '!{t("homeInputButton")}' }}

          .loading-section(v-show="isLoading")
            .progress-container
              .progress-bar
                .progress-fill(:style="{ width: progress + '%' }")
              .progress-text {{ progressMessage }}
            .analysis-steps
              .step(v-for="step in analysisSteps" :key="step.id" :class="{ active: currentStep === step.id, completed: currentStep > step.id }")
                .step-icon {{ step.icon }}
                .step-text {{ step.text }}

          .results-section(v-show="showResults")
            .results-content(v-html="resultsHtml")
            button.btn.btn-secondary(@click="resetDemo") Analyze Another Website

          h2.mt-5.mb-0.poppins-bold(v-show="!isLoading")!=t('heroSubTitle4')

        // Blog panel ‚Äî slides in from the right while the demo analysis runs
        .col-lg-6.col-md-12.blog-panel-container#blog-panel(
          v-show="showBlogPanel"
          :class="{ 'slide-in-right': showBlogPanel }"
        )
          .blog-panel-header
            h3 Latest Marketing Insights
            p Read while your analysis processes

          .blog-panel-content
            .blog-loading(v-if="isFetchingPosts")
              .loading-spinner üîÑ
              p Loading latest posts...

            .blog-error(v-if="blogLoadingError && !isFetchingPosts")
              p ‚ö†Ô∏è Unable to load blog posts

            // Expanded article view ‚Äî replaces the post grid when a card is clicked
            .expanded-article-container(v-if="isArticleExpanded" :class="{ 'article-expanded': isArticleExpanded }")
              button.article-close-btn(@click="closeArticle") ‚úï
              .article-loading(v-if="isFetchingPost")
                .loading-spinner üîÑ
                p Loading article...
              .article-error(v-if="postFetchError && !isFetchingPost")
                p ‚ö†Ô∏è Unable to load article. Please try again.
              .article-content(v-if="!isFetchingPost && !postFetchError && expandedPostContent")
                h2.article-title {{ expandedPostContent.title }}
                p.article-meta {{ expandedPostContent.publishedAt }}
                img(v-if="expandedPostContent.featureImage" :src="expandedPostContent.featureImage" :alt="expandedPostContent.title" style="width:100%;border-radius:8px;margin-bottom:15px;")
                .article-body(v-html="expandedPostContent.content")

            // Post grid ‚Äî only shown when no article is expanded
            .blog-posts-section(v-if="!isArticleExpanded && !isFetchingPosts && !blogLoadingError && blogPosts.length > 0")
              .blog-posts-grid
                .blog-post-card(
                  v-for="(post, index) in paginatedPosts"
                  :key="post.slug"
                  :style="{ animationDelay: (index * 0.1) + 's' }"
                  @click="expandArticle(post)"
                )
                  .blog-post-title {{ post.title }}
                  .blog-post-excerpt {{ post.excerpt }}
                  .blog-post-date {{ post.publishedAt }}

              .blog-pagination(v-if="totalPages > 1")
                button.pagination-btn.prev-btn(@click="prevPage" :disabled="!canGoPrev") ‚ùÆ
                span.page-info {{ currentPage + 1 }} of {{ totalPages }}
                button.pagination-btn.next-btn(@click="nextPage" :disabled="!canGoNext") ‚ùØ

    section.beta-signup-section.mt-5.py-5(style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); border-radius: 15px;")
      .container
        .row.justify-content-center
          .col-lg-8.col-md-10.col-sm-12.text-center
            h2.poppins-bold.mb-3(style="color: white;") üöÄ Join Our Closed Beta!
            p.mb-4(style="color: white; font-size: 1.1rem;") Be the first to experience the future of AI-powered marketing automation. Get exclusive access to our cutting-edge features and help shape the future of A-Pro Marketing.

            form#beta-signup-form.beta-signup-form(method="post" action="/beta-signup")
              .row.justify-content-center
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="name" placeholder="Your Name *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="email" name="email" placeholder="Email Address *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="company" placeholder="Company Name")
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="website" placeholder="Website URL")
                .col-12.text-center
                  button.btn.btn-warning.beta-btn(type="submit")
                    span üéØ Request Beta Access

            .beta-response#beta-response.mt-3(style="display:none;")
              p.response-text
    .mt-3
      h2.mb-5.poppins-bold.text-center(style="font-size:60px")=t('howItWorksTitle')
      .row
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/brain.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle1')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph1')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/campaign.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle2')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph2')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/paper.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle3')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph3')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/jade.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle4')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph4')
      //- .row.mt-5
        .col-12.justify-content-center.text-center.d-flex
          //- a( href="https://cta-na2.hubspot.com/web-interactives/public/v1/track/redirect?encryptedPayload=AVxigLKcOLzO%2BF4snjmbHALdKnIdllat3XLN4d9tL0LjJtZqVQViQjeN8W4zKzUmHhkImwuOY45IAxzcfe9D3%2B6vqb5%2FGjd1j2sJI5DA8iSOSMRFOJIpDY1kuZvPsvRcVqxavqaT4Qo8oZCwUFNCtmdvnhAD5T7zY48G1VnHAd8C0IqIgrZI9e6dlibhDgOHeBc8FIdike9PEA%3D%3D&webInteractiveContentId=201143666368&portalId=242233801" target="_blank" rel="noopener" crossorigin="anonymous")
          a( href="https://meetings-na2.hubspot.com/aaron-krygier" target="_blank" rel="noopener" crossorigin="anonymous")
            .btn-primary.cta-btn.hs-cta-embed.hs-cta-simple-placeholder.hs-cta-embed-201143666368(style="background:white;color:black;" data-hubspot-wrapper-cta-id="201143666368" )
              img(style="transform:none; width:35px;height:35px" width="35" src="/images/icons/calendar.svg" alt="calendar")
              span=t('bookDemo')
              //- img( alt="Book a Demo" loading="lazy" src="https://hubspot-no-cache-na2-prod.s3.amazonaws.com/cta/default/242233801/interactive-201143666368.png" style="height: 100%; width: 100%; object-fit: fill"
                onerror="this.style.display='none'" )


    //- !! AI WARNING: Do not remove or restructure the blog section below.
    //- !! This section was accidentally deleted twice (commits 53effd5 and
    //- !! 0ae4c72) as a side-effect of unrelated edits. Always verify the
    //- !! `each article` loop and `section.blog` block are still present after
    //- !! any edit to this file. Seek approval before removing any lines here.
    .mt-5
      section.blog.q-pa-md
        .text-h1.roboto.text-center=t('latestArticles')
        .q-my-md
          .container
            if !articles || articles.length === 0
              .row.justify-center.mt-5
                .col-12.text-center
                  h3.q-my-md= t('noArticlesFound')
            else
              .row.mt-5.justify-content-center
                each article, i in articles
                  .col-12.col-sm-6.col-md-4.col-lg-4.col-xl-3.mb-3.px-2(style=('view-transition-name:' + article.slug))
                    a(href=(lang != 'en' ? '/' + lang : '') + '/article/' + article.slug)
                      .articles.card.flex.column.justify-between.blog-article(class='animation-delay-' + i, style="height: 100%")
                        .article-title
                          img.blur-up.lazyload(data-src=article.medImg loading="lazy" alt=article.imgAlt)
                        .article-content
                          h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left!= article.title
                          .green-line
                          .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
                            .flex.align-items-center
                              .avatar
                                img.blur-up.lazyload(src=article.authorImg loading="lazy")
                              .text-subtitle2 #{article.author}
                            b.text-subtitle2 #{article.date}
                          .text-body1(style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;")!= article.summary
              .row.justify-content-end
                .btn(style="width:300px;")
                  a.btn-primary.cta-btn(style="padding:5px 10px;background:white;color:black;" href=(lang != 'en' ? '/' + lang : '') + '/articles/all/1')
                    img(style="width:25px;height:25px;" width="25" src="/images/icons/apro-star1.png" alt="star")
                    span(style="text-transform: uppercase;")= t('more')

    section.newsletter-section.mt-5.py-5(style="background: linear-gradient(135deg, #0fffad, #00d4aa); border-radius: 15px;")
      .container
        .row.justify-content-center
          .col-lg-8.col-md-10.col-sm-12.text-center
            h2.poppins-bold.mb-3!=t('newsletterTitle')
            //- Stay Ahead of the Marketing Game
            p.mb-4!=t('newsletterParagraph2')

            form#newsletter-form.newsletter-form(method="post" action="/newsletter-signup")
              .row.justify-content-center
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="name" placeholder="Your Name *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="company" placeholder="Company Name" )
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="email" name="email" placeholder="Email Address *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="website" placeholder="Website URL")
                .col-12.text-center
                  button.btn.btn-success.newsletter-btn(type="submit")
                    span!=t('newsletterBtn')

            .newsletter-response#newsletter-response.mt-3(style="display:none;")
              p.response-text

    
block append scripts
  // Vue.js Application ‚Äî Demo Form Animations + Blog Panel
  script.
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          isAnimating: false,
          formSubmitted: false,
          isLoading: false,
          showResults: false,
          isTransitioning: false,
          websiteUrl: '',
          progress: 0,
          progressMessage: 'Starting analysis...',
          currentStep: 0,
          analysisSteps: [
            { id: 1, icon: 'üöÄ', text: 'Starting website analysis...' },
            { id: 2, icon: 'üîç', text: 'Checking for cached data...' },
            { id: 3, icon: 'üìä', text: 'Analyzing website content...' },
            { id: 4, icon: 'üì±', text: 'Analyzing social media profiles...' },
            { id: 5, icon: '‚ö°', text: 'Running performance audit...' },
            { id: 6, icon: 'üß†', text: 'Generating insights...' },
            { id: 7, icon: 'üéâ', text: 'Analysis complete!' }
          ],
          resultsHtml: '',
          showBlogPanel: false,
          blogPosts: [],
          isFetchingPosts: false,
          blogLoadingError: false,
          currentPage: 0,
          postsPerPage: 4,
          isArticleExpanded: false,
          expandedPostContent: null,
          isFetchingPost: false,
          postFetchError: false
        };
      },

      computed: {
        paginatedPosts() {
          const start = this.currentPage * this.postsPerPage;
          return this.blogPosts.slice(start, start + this.postsPerPage);
        },
        totalPages() { return Math.ceil(this.blogPosts.length / this.postsPerPage); },
        canGoNext() { return this.currentPage < this.totalPages - 1; },
        canGoPrev() { return this.currentPage > 0; }
      },

      methods: {
        async handleFormSubmit() {
          if (!this.websiteUrl.trim()) return;
          this.isAnimating = true;
          this.isLoading = true;
          this.isTransitioning = true;

          this.$nextTick(() => {
            setTimeout(() => {
              this.formSubmitted = true;
              setTimeout(() => {
                this.isTransitioning = false;
                setTimeout(() => this.startPhase2(), 200);
              }, 300);
            }, 200);
          });

          this.startAnalysis();
        },

        async startPhase2() {
          this.fetchBlogPosts();
          this.$nextTick(() => {
            setTimeout(() => { this.showBlogPanel = true; }, 100);
          });
        },

        async fetchBlogPosts() {
          this.isFetchingPosts = true;
          this.blogLoadingError = false;
          try {
            const res = await fetch('/api/ghost-posts');
            const data = await res.json();
            if (data.success) { this.blogPosts = data.posts; }
            else { this.blogLoadingError = true; }
          } catch (e) { this.blogLoadingError = true; }
          finally { this.isFetchingPosts = false; }
        },

        async startAnalysis() {
          const eventSource = new EventSource('/demo-stream?url=' + encodeURIComponent(this.websiteUrl));
          const timeout = setTimeout(() => {
            eventSource.close();
            this.handleError('Analysis timed out. Please try again.');
          }, 90000);

          eventSource.onmessage = (event) => {
            try {
              const data = JSON.parse(event.data);
              if (data.step) this.updateProgress(data.progress || 0, data.message || '', data.step);
              if (data.complete && data.data) {
                clearTimeout(timeout);
                eventSource.close();
                this.showAnalysisResults(data.data);
              }
              if (data.error) { clearTimeout(timeout); eventSource.close(); this.handleError(data.error); }
            } catch (e) {}
          };

          eventSource.onerror = () => {
            clearTimeout(timeout);
            eventSource.close();
            this.handleError('Connection error. Please try again.');
          };
        },

        updateProgress(value, message, step) {
          this.progress = value;
          this.progressMessage = message;
          const map = { init: 1, checking: 2, scraping: 3, social: 4, lighthouse: 5, analysis: 6, complete: 7 };
          this.currentStep = map[step] || 1;
        },

        showAnalysisResults(data) {
          this.isLoading = false;
          this.showResults = true;
          let html = '<div class="analysis-summary" style="text-align:left;font-size:14px;line-height:1.6;">';
          if (data.analysis) {
            html += `<p><strong>üè¢ ${data.analysis.companyName || ''}</strong><br>${data.analysis.businessOverview || ''}</p>`;
            html += `<p><strong>üéØ Target Audience:</strong> ${(data.analysis.targetAudience && data.analysis.targetAudience.primary) || 'N/A'}</p>`;
          }
          if (data.lighthouse) {
            html += `<p><strong>‚ö° Performance:</strong> ${data.lighthouse.performance || 'N/A'}/100 &nbsp; <strong>SEO:</strong> ${data.lighthouse.seo || 'N/A'}/100</p>`;
          }
          const kws = data.keywords && data.keywords.msg ? data.keywords.msg : (Array.isArray(data.keywords) ? data.keywords : []);
          if (kws.length > 0) html += `<p><strong>üîë Keywords:</strong> ${kws.slice(0,5).map(k=>k.keyword).join(', ')}</p>`;
          html += '</div>';
          this.resultsHtml = html;
        },

        handleError(msg) {
          this.isLoading = false;
          this.showResults = true;
          this.resultsHtml = `<p style="color:#dc3545;">‚ö†Ô∏è ${msg}</p>`;
        },

        resetDemo() {
          this.isAnimating = false; this.formSubmitted = false;
          this.isLoading = false; this.showResults = false;
          this.showBlogPanel = false; this.websiteUrl = '';
          this.progress = 0; this.currentStep = 0;
          this.progressMessage = 'Starting analysis...'; this.resultsHtml = '';
          this.isArticleExpanded = false; this.expandedPostContent = null;
        },

        async expandArticle(post) {
          this.isArticleExpanded = true;
          this.isFetchingPost = true;
          this.postFetchError = false;
          this.expandedPostContent = null;
          try {
            const res = await fetch('/api/ghost-post/' + post.slug);
            const data = await res.json();
            if (data.success) { this.expandedPostContent = data.post; }
            else { this.postFetchError = true; }
          } catch (e) { this.postFetchError = true; }
          finally { this.isFetchingPost = false; }
        },

        closeArticle() {
          this.isArticleExpanded = false;
          this.expandedPostContent = null;
          this.isFetchingPost = false;
          this.postFetchError = false;
        },

        nextPage() { if (this.canGoNext) this.currentPage++; },
        prevPage() { if (this.canGoPrev) this.currentPage--; }
      },

      mounted() { console.log('Vue Demo App mounted'); }
    }).mount('#demo-app');

  script.
    document.addEventListener('DOMContentLoaded', function() {
      // Newsletter form submission
      const newsletterForm = document.getElementById('newsletter-form');
      const newsletterResponse = document.getElementById('newsletter-response');

      newsletterForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(newsletterForm);
        const submitButton = newsletterForm.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;

        // Show loading state
        submitButton.innerHTML = '<span>Subscribing...</span>';
        submitButton.disabled = true;

        try {
          const response = await fetch('/newsletter-signup', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              name: formData.get('name'),
              company: formData.get('company'),
              email: formData.get('email'),
              website: formData.get('website')
            })
          });

          const result = await response.json();

          newsletterResponse.style.display = 'block';
          const responseText = newsletterResponse.querySelector('.response-text');

          if (result.success) {
            responseText.textContent = result.message;
            responseText.style.color = '#28a745';
            newsletterForm.reset();
          } else {
            responseText.textContent = result.message;
            responseText.style.color = '#dc3545';
          }

        } catch (error) {
          newsletterResponse.style.display = 'block';
          const responseText = newsletterResponse.querySelector('.response-text');
          responseText.textContent = 'Something went wrong. Please try again.';
          responseText.style.color = '#dc3545';
        } finally {
          // Reset button
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        }
      });

      // Beta signup form submission - ensure this runs immediately after newsletter
      const betaSignupForm = document.getElementById('beta-signup-form');
      const betaResponse = document.getElementById('beta-response');

      if (betaSignupForm) {
        betaSignupForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          console.log('Beta signup form submitted'); // Debug log

          const formData = new FormData(betaSignupForm);
          const submitButton = betaSignupForm.querySelector('button[type="submit"]');
          const originalText = submitButton.innerHTML;

          // Show loading state
          submitButton.innerHTML = '<span>üöÄ Processing...</span>';
          submitButton.disabled = true;

          try {
            const response = await fetch('/beta-signup', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                name: formData.get('name'),
                company: formData.get('company'),
                email: formData.get('email'),
                website: formData.get('website'),
                lang: 'en-US'
              })
            });

            const result = await response.json();
            console.log('Beta signup result:', result); // Debug log

            betaResponse.style.display = 'block';
            const responseText = betaResponse.querySelector('.response-text');

            if (result.success) {
              responseText.textContent = result.message;
              responseText.style.color = '#28a745';
              betaSignupForm.reset();
            } else {
              responseText.textContent = result.message;
              responseText.style.color = '#dc3545';
            }

          } catch (error) {
            console.error('Beta signup error:', error); // Debug log
            betaResponse.style.display = 'block';
            const responseText = betaResponse.querySelector('.response-text');
            responseText.textContent = 'Something went wrong. Please try again.';
            responseText.style.color = '#dc3545';
          } finally {
            // Reset button
            submitButton.innerHTML = originalText;
            submitButton.disabled = false;
          }
        });
      } else {
        console.log('Beta signup form not found'); // Debug log
      }
    });

  script(src="/js/lazy-sizes.js" async="")
  script(type="application/ld+json").
    !{JSON.stringify(jsonLD, null, 2)}
block append styles
  link(rel="stylesheet" href="/css/pages/blogList.css")
  style.
    input{
      padding:15px 20px;
      border:solid black 2px;
    }
    .how-it-works-icon{
      width:150px; 
      height:150px; 
      margin: 20px auto 0px auto;
      border-radius:50%; 
      overflow:hidden; 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      border:15px solid #0fffad; 
      outline:black solid 5px;
    }
    
    /* Demo Results Styles */
    .demo-results {
      margin: 20px 0;
      padding: 20px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: #f9f9f9;
    }
    
    .progress-container {
      margin-bottom: 30px;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0fffad, #00d4aa);
      transition: width 0.3s ease;
      border-radius: 10px;
    }
    
    .progress-text {
      text-align: center;
      font-weight: bold;
      color: #333;
    }
    
    .steps-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .step {
      flex: 1;
      min-width: 200px;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      text-align: center;
      background: white;
      transition: all 0.3s ease;
    }
    
    .step.active {
      border-color: #0fffad;
      background: #f0fff9;
      transform: scale(1.05);
    }
    
    .step.completed {
      border-color: #00d4aa;
      background: #e6fff9;
    }
    
    .step-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    
    .step-text {
      font-size: 14px;
      font-weight: bold;
    }
    
    .results-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #0fffad;
    }
    
    .result-sections {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .website-analysis,
    .social-media-analysis,
    .performance-analysis,
    .keyword-analysis {
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
    }
    
    .social-profile,
    .keyword-item {
      padding: 10px;
      margin: 5px 0;
      background: #f5f5f5;
      border-radius: 4px;
    }
    
    .error {
      color: #d32f2f;
      background: #ffebee;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ffcdd2;
    }

    /* Newsletter Section Styles */
    .newsletter-section {
      margin: 60px 0;
      padding: 60px 20px;
      background: linear-gradient(135deg, #0fffad, #00d4aa);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(15, 255, 173, 0.3);
    }

    .newsletter-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .newsletter-section p {
      font-size: 1.2rem;
      margin-bottom: 40px;
      opacity: 0.95;
    }

    .newsletter-input {
      padding: 15px 20px;
      border: 2px solid white;
      border-radius: 10px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      width: 100%;
    }

    .newsletter-input:focus {
      outline: none;
      border-color: #333;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .newsletter-btn {
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: #333;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .newsletter-btn:hover {
      background: #555;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .newsletter-btn:disabled {
      background: #999;
      cursor: not-allowed;
      transform: none;
    }

    .newsletter-response {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .newsletter-response .response-text {
      font-size: 16px;
      font-weight: bold;
      margin: 0;
    }

    /* Beta Signup Section Styles */
    .beta-signup-section {
      margin: 60px 0;
      padding: 60px 20px;
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
    }

    .beta-signup-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .beta-signup-section p {
      font-size: 1.1rem;
      margin-bottom: 40px;
      opacity: 0.95;
    }

    .beta-input {
      padding: 15px 20px;
      border: 2px solid white;
      border-radius: 10px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      width: 100%;
    }

    .beta-input:focus {
      outline: none;
      border-color: #333;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .beta-btn {
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: #333;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .beta-btn:hover {
      background: #555;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .beta-btn:disabled {
      background: #999;
      cursor: not-allowed;
      transform: none;
    }

    .beta-response {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .beta-response .response-text {
      font-size: 16px;
      font-weight: bold;
      margin: 0;
    }

    @media (max-width: 768px) {
      .newsletter-section {
        margin: 40px 0;
        padding: 40px 15px;
      }

      .newsletter-section h2 {
        font-size: 2rem;
      }

      .newsletter-section p {
        font-size: 1.1rem;
        margin-bottom: 30px;
      }

      .newsletter-input {
        margin-bottom: 15px;
      }

      .beta-signup-section {
        margin: 40px 0;
        padding: 40px 15px;
      }

      .beta-signup-section h2 {
        font-size: 2rem;
      }

      .beta-signup-section p {
        font-size: 1rem;
        margin-bottom: 30px;
      }

      .beta-input {
        margin-bottom: 15px;
      }
    }

    /* White Fade Overlay for Smooth Transitions */
    .transition-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(2px);
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .transition-overlay.fade-active { opacity: 1; }

    /* Phase 1 ‚Äî Hero graphic fades and slides out left */
    #hero-graphic {
      transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      will-change: opacity, transform;
    }
    #hero-graphic.fade-out {
      opacity: 0;
      transform: translate3d(-30px, 0, 0) scale(0.95);
    }

    /* Phase 1 ‚Äî Demo form section moves left */
    #demo-form-section {
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      will-change: transform, width;
    }
    #demo-form-section.move-left { transform: translate3d(-15%, 0, 0); }
    #demo-form-section.form-with-blog {
      flex: 0 0 48%;
      max-width: 48%;
      transform: translate3d(0, 0, 0);
    }

    .header-content {
      transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      will-change: opacity, transform;
    }
    .header-content.fade-up { opacity: 0; transform: translate3d(0, -20px, 0); }

    /* Phase 2 ‚Äî Blog panel slides in from the right */
    .blog-panel-container {
      position: absolute;
      top: 0; left: 50%;
      width: 45%;
      transform: translate3d(100%, 0, 0);
      opacity: 0;
      transition: transform 0.7s cubic-bezier(0.23, 1, 0.32, 1),
                  opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1),
                  position 0s 0.7s;
      padding: 20px 15px;
      background: #fff;
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      min-height: 400px;
      max-height: 500px;
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 1000;
      will-change: transform, opacity;
      margin: 0.75rem 0;
      box-sizing: border-box;
    }
    .blog-panel-container.slide-in-right {
      transform: translate3d(4%, 0, 0);
      opacity: 1;
      position: relative;
      left: auto; top: auto;
      margin-left: 4%;
      margin-bottom: 30px;
    }

    .hero-section .row {
      min-height: 400px;
      position: relative;
      transform: translate3d(0, 0, 0);
    }
    .hero-section.with-blog-panel { margin-bottom: 100px; }
    .hero-section.with-blog-panel + .mt-3 { margin-top: 20px !important; }

    .blog-panel-header h3 { margin-bottom: 10px; color: #333; font-weight: bold; }
    .blog-panel-header p { margin-bottom: 20px; color: #666; font-size: 14px; }

    .blog-posts-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .blog-post-card {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      opacity: 0;
      transform: translate3d(0, 20px, 0);
      animation: slideInUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      transition: box-shadow 0.3s, transform 0.2s;
      will-change: transform, box-shadow;
    }
    .blog-post-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transform: translate3d(0, -2px, 0);
    }
    .blog-post-title { font-weight: bold; font-size: 14px; margin-bottom: 8px; color: #333; line-height: 1.3; }
    .blog-post-excerpt {
      font-size: 12px; color: #666; line-height: 1.4;
      display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
    }
    .blog-post-date { font-size: 11px; color: #999; margin-top: 5px; font-style: italic; }
    .blog-loading, .blog-error { text-align: center; padding: 40px 20px; color: #666; }
    .loading-spinner { font-size: 24px; animation: spin 1s linear infinite; }

    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes slideInUp {
      from { opacity: 0; transform: translate3d(0, 20px, 0); }
      to { opacity: 1; transform: translate3d(0, 0, 0); }
    }

    .blog-pagination {
      display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 15px;
    }
    .pagination-btn {
      background: #0fffad; border: none; border-radius: 6px; padding: 6px 12px;
      cursor: pointer; font-weight: bold;
    }
    .pagination-btn:disabled { opacity: 0.4; cursor: default; }
    .page-info { font-size: 13px; color: #666; }

    /* Expanded article view inside the blog panel */
    .expanded-article-container {
      position: absolute;
      top: 2%; left: 2%;
      width: 96%; height: 96%;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      z-index: 2000;
      overflow-y: auto;
      transform: scale(0.8);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .expanded-article-container.article-expanded {
      transform: scale(1);
      opacity: 1;
    }
    .article-close-btn {
      position: sticky;
      top: 0;
      float: right;
      width: 30px; height: 30px;
      background: rgba(224, 224, 224, 0.95);
      border: none; border-radius: 50%;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px; color: #666;
      transition: background-color 0.2s ease;
      z-index: 2001;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .article-close-btn:hover { background: rgba(208, 208, 208, 0.95); color: #333; }
    .article-title { font-size: 18px; font-weight: bold; margin-bottom: 8px; line-height: 1.3; }
    .article-meta { font-size: 12px; color: #999; margin-bottom: 15px; }
    .article-body { font-size: 14px; line-height: 1.7; color: #333; }
    .article-body img { max-width: 100%; border-radius: 6px; margin: 10px 0; }
    .article-loading, .article-error { text-align: center; padding: 40px 20px; color: #666; }