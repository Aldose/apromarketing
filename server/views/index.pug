extends layout
block append head
  title= t('homePageMeta.title')
  meta(name='description', content=t('homePageMeta.description'))
  link(rel='canonical', href=`https://apromarketing.com`+(lang != 'en' ? '/' + lang : '') + `/`)
  meta(name="keywords", content=t('homePageMeta.keywords'))
  meta(name='robots', content='index, follow')
  meta(property='og:title', content=t('homePageMeta.title'))
  meta(property='og:description', content=t('homePageMeta.description'))
  meta(property='og:url', content=`https://apromarketing.com`+(lang != 'en' ? '/' + lang : '') + `/`)
  meta(property='og:image', content=`https://apromarketing.com/images/homepageImg.png`)
  meta(property='og:image:width', content='1200')
  meta(property='og:image:height', content='630')
  meta(property='og:type', content='website')
  meta(property='og:locale', content=lang)

block content
  link(rel="stylesheet" href="/css/pages/index.css")
  .container
    section.hero-section
      .row
        .col-lg-6.col-sm-12.text-center
          h1.mb-0.poppins-bold=t('heroTitle1')
          h1.green-underline=t('heroTitle2')
          br
          img(src="/images/jade/jade1.jpg" alt="Jade" style="width:300px;")
          br
          h2.green-underline.text-center.poppins-bold.q-mb-lg!=t('heroSubTitle1')
          h3.text-center.poppins-bold.q-mb-lg!=t('heroSubTitle2')
        .col-lg-6.offset-lg-0.col-md-8.offset-md-2.col-sm-12.offset-sm-0.mt-sm-5.text-center.flex.flex-column.justify-content-center
          h2.mb-5.poppins-bold!=t('heroSubTitle3')
            
          //- img(src="/images/jade/jade-confident.webp" alt="Jade" style="width:300px;")
          //- a(href=`${appUrl}/demo`) helloasdfasf
          form#demo-form
            p!=t('homeInputTitle')
            .row
              .col-8
                input#demo-website-input(type="text" name="website" placeholder!=t('homeInputPlaceholder') style="width:100%; " required)
              .col-4
                button.btn-primary.cta-btn(type="submit" style=" background:white;color:black;")
                  img(style="width:35px;height:35px" width="35" src="/images/icons/apro-star1.png" alt="star")
                  span(style="text-transform: uppercase;")=t('homeInputButton')
          #demo-status(style="margin-top:10px; font-size:14px; color:#333; display:none;")
          h2.mt-5.mb-0.poppins-bold!=t('heroSubTitle4') 
          //- h2.mb-5.poppins-bold!=t('heroSubTitle5')
    section.beta-signup-section.mt-5.py-5(style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); border-radius: 15px;")
      .container
        .row.justify-content-center
          .col-lg-8.col-md-10.col-sm-12.text-center
            h2.poppins-bold.mb-3(style="color: white;") üöÄ Join Our Closed Beta!
            p.mb-4(style="color: white; font-size: 1.1rem;") Be the first to experience the future of AI-powered marketing automation. Get exclusive access to our cutting-edge features and help shape the future of A-Pro Marketing.

            form#beta-signup-form.beta-signup-form(method="post" action="/beta-signup")
              .row.justify-content-center
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="name" placeholder="Your Name *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="email" name="email" placeholder="Email Address *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="company" placeholder="Company Name")
                .col-md-6.col-sm-12.mb-3
                  input.form-control.beta-input(type="text" name="website" placeholder="Website URL")
                .col-12.text-center
                  button.btn.btn-warning.beta-btn(type="submit")
                    span üéØ Request Beta Access

            .beta-response#beta-response.mt-3(style="display:none;")
              p.response-text
    .mt-3
      h2.mb-5.poppins-bold.text-center(style="font-size:60px")=t('howItWorksTitle')
      .row
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/brain.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle1')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph1')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/campaign.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle2')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph2')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/paper.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle3')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph3')
        .col-12.col-sm-6.col-md-6.col-lg-6.col-xl-3.mb-3.px-2
          .articles.card.flex.column.justify-between.blog-article(class='animation-delay-0', style="height: 100%")
            .how-it-works-icon
              img(src="/images/icons/home/jade.webp" alt="Brain Icon" style="width:100px;")
            .article-content
              h3.q-px-sm.q-pt-sm.ellipsis-2-lines.text-left=t('howItWorksSubTitle4')
              .green-line
              .flex.justify-content-between.align-items-center(style="margin-bottom: 20px;")
              .text-body1!=t('howItWorksParagraph4')
      //- .row.mt-5
        .col-12.justify-content-center.text-center.d-flex
          //- a( href="https://cta-na2.hubspot.com/web-interactives/public/v1/track/redirect?encryptedPayload=AVxigLKcOLzO%2BF4snjmbHALdKnIdllat3XLN4d9tL0LjJtZqVQViQjeN8W4zKzUmHhkImwuOY45IAxzcfe9D3%2B6vqb5%2FGjd1j2sJI5DA8iSOSMRFOJIpDY1kuZvPsvRcVqxavqaT4Qo8oZCwUFNCtmdvnhAD5T7zY48G1VnHAd8C0IqIgrZI9e6dlibhDgOHeBc8FIdike9PEA%3D%3D&webInteractiveContentId=201143666368&portalId=242233801" target="_blank" rel="noopener" crossorigin="anonymous")
          a( href="https://meetings-na2.hubspot.com/aaron-krygier" target="_blank" rel="noopener" crossorigin="anonymous")
            .btn-primary.cta-btn.hs-cta-embed.hs-cta-simple-placeholder.hs-cta-embed-201143666368(style="background:white;color:black;" data-hubspot-wrapper-cta-id="201143666368" )
              img(style="transform:none; width:35px;height:35px" width="35" src="/images/icons/calendar.svg" alt="calendar")
              span=t('bookDemo')
              //- img( alt="Book a Demo" loading="lazy" src="https://hubspot-no-cache-na2-prod.s3.amazonaws.com/cta/default/242233801/interactive-201143666368.png" style="height: 100%; width: 100%; object-fit: fill"
                onerror="this.style.display='none'" )


    //- include components/features-overview
    //- .row.justify-center
      a.btn-lg.btn-primary.cta-btn(href=`https://app.a-pro.ai/register?lang=${lang}` hx-boost="true")
        img(src="/icons/apro-star1.png" alt="star")
        span= t('homeHeroBtn')

    section.newsletter-section.mt-5.py-5(style="background: linear-gradient(135deg, #0fffad, #00d4aa); border-radius: 15px;")
      .container
        .row.justify-content-center
          .col-lg-8.col-md-10.col-sm-12.text-center
            h2.poppins-bold.mb-3!=t('newsletterTitle')
            //- Stay Ahead of the Marketing Game
            p.mb-4!=t('newsletterParagraph2')

            form#newsletter-form.newsletter-form(method="post" action="/newsletter-signup")
              .row.justify-content-center
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="name" placeholder="Your Name *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="company" placeholder="Company Name" )
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="email" name="email" placeholder="Email Address *" required)
                .col-md-6.col-sm-12.mb-3
                  input.form-control.newsletter-input(type="text" name="website" placeholder="Website URL")
                .col-12.text-center
                  button.btn.btn-success.newsletter-btn(type="submit")
                    span!=t('newsletterBtn')

            .newsletter-response#newsletter-response.mt-3(style="display:none;")
              p.response-text

    
block append scripts
  script.
    document.addEventListener('DOMContentLoaded', function() {
      // Demo form submission
      const demoForm = document.getElementById('demo-form');
      const demoStatus = document.getElementById('demo-status');

      demoForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const websiteUrl = document.getElementById('demo-website-input').value.trim();
        if (!websiteUrl) return;

        demoStatus.style.display = 'block';
        demoStatus.textContent = 'Starting analysis...';

        const submitBtn = demoForm.querySelector('button[type="submit"]');
        submitBtn.disabled = true;

        const eventSource = new EventSource('/demo-stream?url=' + encodeURIComponent(websiteUrl));

        const timeout = setTimeout(function() {
          eventSource.close();
          submitBtn.disabled = false;
          demoStatus.textContent = 'Analysis timed out. Please try again.';
        }, 90000);

        eventSource.onmessage = function(event) {
          try {
            const data = JSON.parse(event.data);
            if (data.message) demoStatus.textContent = data.message;
            if (data.complete && data.data) {
              clearTimeout(timeout);
              eventSource.close();
              submitBtn.disabled = false;
              showDemoResults(data.data);
            }
          } catch(err) {}
        };

        eventSource.onerror = function() {
          clearTimeout(timeout);
          eventSource.close();
          submitBtn.disabled = false;
          demoStatus.textContent = 'Analysis encountered an error. Please try again.';
        };

        function showDemoResults(d) {
          var html = '<div style="margin-top:15px;text-align:left;background:#f9f9f9;padding:15px;border-radius:8px;font-size:14px;line-height:1.6;">';
          if (d.analysis) {
            html += '<p><strong>üè¢ ' + (d.analysis.companyName || '') + '</strong><br>' + (d.analysis.businessOverview || '') + '</p>';
            html += '<p><strong>üéØ Target Audience:</strong> ' + ((d.analysis.targetAudience && d.analysis.targetAudience.primary) || 'N/A') + '</p>';
          }
          if (d.lighthouse) {
            html += '<p><strong>‚ö° Performance:</strong> ' + (d.lighthouse.performance || 'N/A') + '/100 &nbsp; <strong>Accessibility:</strong> ' + (d.lighthouse.accessibility || 'N/A') + '/100 &nbsp; <strong>SEO:</strong> ' + (d.lighthouse.seo || 'N/A') + '/100</p>';
          }
          var keywords = d.keywords && d.keywords.msg ? d.keywords.msg : (Array.isArray(d.keywords) ? d.keywords : []);
          if (keywords.length > 0) {
            html += '<p><strong>üîë Top Keywords:</strong> ' + keywords.slice(0, 5).map(function(k){ return k.keyword; }).join(', ') + '</p>';
          }
          html += '</div>';
          demoStatus.innerHTML = html;
        }
      });

      // Newsletter form submission
      const newsletterForm = document.getElementById('newsletter-form');
      const newsletterResponse = document.getElementById('newsletter-response');

      newsletterForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(newsletterForm);
        const submitButton = newsletterForm.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;

        // Show loading state
        submitButton.innerHTML = '<span>Subscribing...</span>';
        submitButton.disabled = true;

        try {
          const response = await fetch('/newsletter-signup', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              name: formData.get('name'),
              company: formData.get('company'),
              email: formData.get('email'),
              website: formData.get('website')
            })
          });

          const result = await response.json();

          newsletterResponse.style.display = 'block';
          const responseText = newsletterResponse.querySelector('.response-text');

          if (result.success) {
            responseText.textContent = result.message;
            responseText.style.color = '#28a745';
            newsletterForm.reset();
          } else {
            responseText.textContent = result.message;
            responseText.style.color = '#dc3545';
          }

        } catch (error) {
          newsletterResponse.style.display = 'block';
          const responseText = newsletterResponse.querySelector('.response-text');
          responseText.textContent = 'Something went wrong. Please try again.';
          responseText.style.color = '#dc3545';
        } finally {
          // Reset button
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        }
      });

      // Beta signup form submission - ensure this runs immediately after newsletter
      const betaSignupForm = document.getElementById('beta-signup-form');
      const betaResponse = document.getElementById('beta-response');

      if (betaSignupForm) {
        betaSignupForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          console.log('Beta signup form submitted'); // Debug log

          const formData = new FormData(betaSignupForm);
          const submitButton = betaSignupForm.querySelector('button[type="submit"]');
          const originalText = submitButton.innerHTML;

          // Show loading state
          submitButton.innerHTML = '<span>üöÄ Processing...</span>';
          submitButton.disabled = true;

          try {
            const response = await fetch('/beta-signup', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                name: formData.get('name'),
                company: formData.get('company'),
                email: formData.get('email'),
                website: formData.get('website'),
                lang: 'en-US'
              })
            });

            const result = await response.json();
            console.log('Beta signup result:', result); // Debug log

            betaResponse.style.display = 'block';
            const responseText = betaResponse.querySelector('.response-text');

            if (result.success) {
              responseText.textContent = result.message;
              responseText.style.color = '#28a745';
              betaSignupForm.reset();
            } else {
              responseText.textContent = result.message;
              responseText.style.color = '#dc3545';
            }

          } catch (error) {
            console.error('Beta signup error:', error); // Debug log
            betaResponse.style.display = 'block';
            const responseText = betaResponse.querySelector('.response-text');
            responseText.textContent = 'Something went wrong. Please try again.';
            responseText.style.color = '#dc3545';
          } finally {
            // Reset button
            submitButton.innerHTML = originalText;
            submitButton.disabled = false;
          }
        });
      } else {
        console.log('Beta signup form not found'); // Debug log
      }
    });

  script(src="/js/lazy-sizes.js" async="")
  script(type="application/ld+json").
    !{JSON.stringify(jsonLD, null, 2)}
block append styles
  link(rel="stylesheet" href="/css/pages/blogList.css")
  style.
    input{
      padding:15px 20px;
      border:solid black 2px;
    }
    .how-it-works-icon{
      width:150px; 
      height:150px; 
      margin: 20px auto 0px auto;
      border-radius:50%; 
      overflow:hidden; 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      border:15px solid #0fffad; 
      outline:black solid 5px;
    }
    
    /* Demo Results Styles */
    .demo-results {
      margin: 20px 0;
      padding: 20px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: #f9f9f9;
    }
    
    .progress-container {
      margin-bottom: 30px;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0fffad, #00d4aa);
      transition: width 0.3s ease;
      border-radius: 10px;
    }
    
    .progress-text {
      text-align: center;
      font-weight: bold;
      color: #333;
    }
    
    .steps-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .step {
      flex: 1;
      min-width: 200px;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      text-align: center;
      background: white;
      transition: all 0.3s ease;
    }
    
    .step.active {
      border-color: #0fffad;
      background: #f0fff9;
      transform: scale(1.05);
    }
    
    .step.completed {
      border-color: #00d4aa;
      background: #e6fff9;
    }
    
    .step-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    
    .step-text {
      font-size: 14px;
      font-weight: bold;
    }
    
    .results-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #0fffad;
    }
    
    .result-sections {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .website-analysis,
    .social-media-analysis,
    .performance-analysis,
    .keyword-analysis {
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
    }
    
    .social-profile,
    .keyword-item {
      padding: 10px;
      margin: 5px 0;
      background: #f5f5f5;
      border-radius: 4px;
    }
    
    .error {
      color: #d32f2f;
      background: #ffebee;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ffcdd2;
    }

    /* Newsletter Section Styles */
    .newsletter-section {
      margin: 60px 0;
      padding: 60px 20px;
      background: linear-gradient(135deg, #0fffad, #00d4aa);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(15, 255, 173, 0.3);
    }

    .newsletter-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .newsletter-section p {
      font-size: 1.2rem;
      margin-bottom: 40px;
      opacity: 0.95;
    }

    .newsletter-input {
      padding: 15px 20px;
      border: 2px solid white;
      border-radius: 10px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      width: 100%;
    }

    .newsletter-input:focus {
      outline: none;
      border-color: #333;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .newsletter-btn {
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: #333;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .newsletter-btn:hover {
      background: #555;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .newsletter-btn:disabled {
      background: #999;
      cursor: not-allowed;
      transform: none;
    }

    .newsletter-response {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .newsletter-response .response-text {
      font-size: 16px;
      font-weight: bold;
      margin: 0;
    }

    /* Beta Signup Section Styles */
    .beta-signup-section {
      margin: 60px 0;
      padding: 60px 20px;
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
    }

    .beta-signup-section h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .beta-signup-section p {
      font-size: 1.1rem;
      margin-bottom: 40px;
      opacity: 0.95;
    }

    .beta-input {
      padding: 15px 20px;
      border: 2px solid white;
      border-radius: 10px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      width: 100%;
    }

    .beta-input:focus {
      outline: none;
      border-color: #333;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .beta-btn {
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: #333;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .beta-btn:hover {
      background: #555;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .beta-btn:disabled {
      background: #999;
      cursor: not-allowed;
      transform: none;
    }

    .beta-response {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .beta-response .response-text {
      font-size: 16px;
      font-weight: bold;
      margin: 0;
    }

    @media (max-width: 768px) {
      .newsletter-section {
        margin: 40px 0;
        padding: 40px 15px;
      }

      .newsletter-section h2 {
        font-size: 2rem;
      }

      .newsletter-section p {
        font-size: 1.1rem;
        margin-bottom: 30px;
      }

      .newsletter-input {
        margin-bottom: 15px;
      }

      .beta-signup-section {
        margin: 40px 0;
        padding: 40px 15px;
      }

      .beta-signup-section h2 {
        font-size: 2rem;
      }

      .beta-signup-section p {
        font-size: 1rem;
        margin-bottom: 30px;
      }

      .beta-input {
        margin-bottom: 15px;
      }
    }